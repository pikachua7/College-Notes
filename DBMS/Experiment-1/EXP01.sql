/*QUERY-1*/
CREATE TABLE EMP (
	EMP_CODE NUMBER(2) NOT NULL,
	EMP_FNAME VARCHAR2(15) NOT NULL,
	EMP_LNAME VARCHAR2(15) NOT NULL,
	EMP_DOB DATE DEFAULT SYSDATE-(365*22) NOT NULL,
	STORE_CODE NUMBER(1) NOT NULL,
	SALARY NUMBER(5) NOT NULL CHECK (SALARY>=10000),
	CONSTRAINT EMP_PK_EMP_CODE PRIMARY KEY (EMP_CODE)
);

/*Table Created.*/
CREATE TABLE STORE (
	STORE_CODE NUMBER(2) NOT NULL,
	STORE_NAME VARCHAR(25) NOT NULL,
	YTD_SALES NUMBER(9,2) DEFAULT 0 NOT NULL,
	REGION_CODE NUMBER(1) NOT NULL,
	EMP_CODE NUMBER(2) NOT NULL,
	CONSTRAINT STORE_PK_STORE_CODE PRIMARY KEY (STORE_CODE),
	CONSTRAINT STORE_FK_EMP_EMP_CODE FOREIGN KEY (EMP_CODE) REFERENCES EMP(EMP_CODE)
);
/*Table Created.*/

CREATE TABLE REGION (
	REGION_CODE NUMBER(1) NOT NULL,
	REGION_DESC VARCHAR2(10) NOT NULL CHECK(REGION_DESC IN('EAST','WEST','NORTH','SOUTH')),
	CONSTRAINT REGION_PK_REGION_CODE PRIMARY KEY (REGION_CODE)
);
/*Table Created.*/

ALTER TABLE EMP
	ADD CONSTRAINT EMP_FK_STORE_STORE_CODE FOREIGN KEY (STORE_CODE) REFERENCES STORE(STORE_CODE);
	
ALTER TABLE STORE 
	ADD CONSTRAINT STORE_FK_REGION_REGION_CODE FOREIGN KEY (REGION_CODE) REFERENCES REGION(REGION_CODE);


ALTER TABLE STORE
  DROP CONSTRAINT STORE_FK_EMP_EMP_CODE;
  

INSERT INTO REGION VALUES(1,'EAST');
INSERT INTO REGION VALUES(2,'WEST');
INSERT INTO REGION VALUES(3,'NORTH');
INSERT INTO REGION VALUES(4,'SOUTH');


INSERT INTO STORE VALUES (21,'SUCCESS JUNCTION',1000555.76,2,11);
INSERT INTO STORE VALUES (11,'OPPORTUNITY SQUARE',986785.40,1,13);
INSERT INTO STORE VALUES (31,'ATTRIBUTE ALLEY',944568.66,3,18);
INSERT INTO STORE VALUES (41,'CURIOSITY CIRCLE',568000.00,4,12);

INSERT INTO EMP VALUES(11,'KASHISH','SHUKLA','25-MAY-1966',21,45000);
INSERT INTO EMP VALUES(12,'ATHARVA','PALIWAL','11-JUN-2000',41,36000);
INSERT INTO EMP VALUES(13,'GAZAL','SINGH','02-OCT-1961',11,48000);
INSERT INTO EMP VALUES(18,'YASH','ROY','03-APR-1970',31,38000);
INSERT INTO EMP VALUES(24,'VALLABH','ROY','11-DEC-1974',41,32000);


/*QUERY-4*/
SELECT SYSDATE , SYSTIMESTAMP FROM DUAL;


/*SYSDATE
---------
SYSTIMESTAMP
---------------------------------------------------------------------------
07-AUG-20
07-AUG-20 06.43.27.650000 PM +05:30 */


ALTER TABLE STORE
	ADD CONSTRAINT STORE_FK_EMP_EMP_CODE FOREIGN KEY (EMP_CODE) REFERENCES EMP(EMP_CODE);

/*QUERY-5*/
SELECT * FROM EMP 
WHERE SALARY <=35000;
/*
SQL> SELECT * FROM EMP
  2  WHERE SALARY <=35000;

  EMP_CODE EMP_FNAME       EMP_LNAME       EMP_DOB   STORE_CODE     SALARY
---------- --------------- --------------- --------- ---------- ----------
        24 VALLABH         ROY             11-DEC-74         41      32000
*/

/*QUERY-6*/
SELECT EMP_FNAME,EMP_LNAME FROM EMP,STORE
WHERE EMP_DOB<='01-JAN-1972' AND EMP.STORE_CODE=STORE.STORE_CODE AND STORE.REGION_CODE=2;
/*SQL> SELECT EMP_FNAME,EMP_LNAME FROM EMP,STORE
  2  WHERE EMP_DOB<='01-JAN-1972' AND EMP.STORE_CODE=STORE.STORE_CODE AND STORE.REGION_CODE=2;

EMP_FNAME       EMP_LNAME
--------------- ---------------
KASHISH         SHUKLA

*/


/*QUERY-7*/
SELECT EMP_FNAME,EMP_LNAME,STORE_NAME,YTD_SALES,REGION_CODE,EMP.EMP_CODE FROM EMP,STORE
WHERE EMP.EMP_CODE=STORE.EMP_CODE;
/*
SQL> SELECT EMP_FNAME,EMP_LNAME,STORE_NAME,YTD_SALES,REGION_CODE,EMP.EMP_CODE FROM EMP,STORE
  2  WHERE EMP.EMP_CODE=STORE.EMP_CODE;

EMP_FNAME       EMP_LNAME       STORE_NAME                 YTD_SALES REGION_CODE
--------------- --------------- ------------------------- ---------- -----------
  EMP_CODE
----------
KASHISH         SHUKLA          SUCCESS JUNCTION          1000555.76           2
        11

ATHARVA         PALIWAL         CURIOSITY CIRCLE              568000           4
        12

GAZAL           SINGH           OPPORTUNITY SQUARE          986785.4           1
        13


EMP_FNAME       EMP_LNAME       STORE_NAME                 YTD_SALES REGION_CODE
--------------- --------------- ------------------------- ---------- -----------
  EMP_CODE
----------
YASH            ROY             ATTRIBUTE ALLEY            944568.66           3
        18
*/


/*QUERY-8*/
SELECT STORE_CODE,STORE_NAME,REGION_DESC FROM STORE,REGION
WHERE STORE.REGION_CODE=REGION.REGION_CODE;
/*
SQL> SELECT STORE_CODE,STORE_NAME,REGION_DESC FROM STORE,REGION
  2  WHERE STORE.REGION_CODE=REGION.REGION_CODE;

STORE_CODE STORE_NAME                REGION_DES
---------- ------------------------- ----------
        11 OPPORTUNITY SQUARE        EAST
        21 SUCCESS JUNCTION          WEST
        31 ATTRIBUTE ALLEY           NORTH
        41 CURIOSITY CIRCLE          SOUTH

*/

/*
SQL> COMMIT;

Commit complete.*/


/*SQL> DISCONNECT CS540;*/















